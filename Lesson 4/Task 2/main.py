from flask import Flask, render_template, request

app = Flask(__name__)

game_board = [
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
    "..............................................................................................................",
]

player_position = {'x': 5, 'y': 5}

@app.route('/')
def index():
    return render_template('index.html', game_board='\n'.join(game_board))

@app.route('/move', methods=['POST'])
def move():
    global player_position

    if request.method == 'POST':
        direction = request.form['direction']

        if direction == 'up' and player_position['y'] > 0:
            player_position['y'] -= 1
        elif direction == 'down' and player_position['y'] < len(game_board) - 1:
            player_position['y'] += 1
        elif direction == 'left' and player_position['x'] > 0:
            player_position['x'] -= 1
        elif direction == 'right' and player_position['x'] < len(game_board[0]) - 1:
            player_position['x'] += 1

        update_game_board()

    return render_template('index.html', game_board='\n'.join(game_board))

def update_game_board():
    global game_board

    game_board = [
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
        "..............................................................................................................",
]

    game_board[player_position['y']] = (
        game_board[player_position['y']][:player_position['x']]
        + '@'
        + game_board[player_position['y']][player_position['x'] + 1:]
    )

app.run()
